# 04. ストレージ設計（S3 / その他）

## 採用AWSサービス（本章該当）

| サービス名    | 用途                                                           |
|--------------|---------------------------------------------------------------|
| S3           | データソースのファイル、または監査ファイル用のストレージ           |

## 1. 概要

本システムにおけるストレージは、主に **Amazon S3** を中心に構成している。  
データの中間保存、ログ保存、Glueとの連携に使用し、永続性とコスト効率を両立するよう設計している。

---

## 2. Amazon S3

### 2.1 バケット一覧と用途

監査ログバケットはSSE-KMSにし、一般のバケットはコスト重視のSSE-S3としている。
監査ログの保管は3年としている。

| バケット名              | 用途                       | ライフサイクル設定      | 暗号化       |
|--------------------------|----------------------------|--------------------------|--------------|
| `aws-glue-common` | Glue一時データ・ソースコードの保管   | 削除しない | SSE-S3       |
| `aws-glue-logs-496620541602` | Lambda/Glueなどのログ保管 | 3年 | SSE-KMS       |
| `aws-cloudtrail-logs-496620541602` | CloudTrailログ保管 | 3年 | SSE-KMS       |
| `awi-config-bucket-496620541602` | AWS configログ保管 | 3年 | SSE-KMS       |
| `aws-redshift-logs-496620541602` | Redshiftログ保管 | 3年 | SSE-KMS       |
| `awi-cost-report` | コストデータアップロード用（IDS保守報告用） | 削除しない | SSE-S3       |
| `prod-hfm` | HFMデータアップロード用（本番用） | 手動運用 | SSE-S3 |
| `prod-stravis` | STRAVISデータアップロード用（本番用） | 手動運用 | SSE-S3 |
| `prod-ifusion` | iFusionデータアップロード用（本番用） | 手動運用 | SSE-S3 |
| `prod-mst-data` | マスタデータアップロード用（本番用） | 手動運用 | SSE-S3 |
| `prod-hfm` | HFMデータアップロード用（検証用） | 手動運用 | SSE-S3 |
| `prod-stravis` | STRAVISデータアップロード用（検証用） | 手動運用 | SSE-S3 |
| `prod-ifusion` | iFusionデータアップロード用（検証用） | 手動運用 | SSE-S3 |
| `prod-mst-data` | マスタデータアップロード用（検証用） | 手動運用 | SSE-S3 |

> 全バケットで **ブロックパブリックアクセス有効化済み**  

※一部のバケット名については今後自動作成によって変更可能性があるため、後日修正を行う。

---

[前の章へ](03_compute.md)｜[目次へ](README.md)｜[次の章へ](05_database.md)
